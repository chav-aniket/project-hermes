---
import Layout from "@layouts/Layout.astro";

import Nav from "@astroComponents/Nav.astro";
import Repo from "@astroComponents/Repo.astro";
import { Age, IconPill } from "@solidComponents/solidComponents";
import AtlassianIcon from "@svelteComponents/AtlassianIcon.svelte";

import { type RepoResult, fetchRepos } from "@utils/github";

const repoResult: RepoResult = await fetchRepos();
---

<Layout title="Homepage">
  <main
    class="m-5 object-center text-textLight dark:text-textDark sm:m-8 md:m-12 lg:m-20 xl:m-32"
  >
    <div class="2x:flex-row 2xl:flex">
      <div class="flex flex-col">
        <Nav />
        <div>
          <h1
            class="mb-5 mt-5 text-lg font-bold leading-relaxed sm:mb-10 sm:text-2xl md:text-3xl lg:text-4xl lg:leading-normal xl:text-5xl xl:leading-normal"
          >
            Howdy ğŸ‘‹ğŸ¼ I'm Aniket,<br />
            Software Engineer
            <span class="inline-block sm:whitespace-nowrap">
              @<a
                target="_blank"
                rel="noopener noreferrer"
                href="https://www.atlassian.com"
                class="hover-scale inline-block align-middle"
              >
                <IconPill
                  client:load
                  class="hover-glow ml-1 inline rounded-full py-1 sm:ml-2 md:ml-4 bg-secondary-light dark:bg-secondary-dark"
                >
                  <span class="pl-2 sm:pl-4">
                    <AtlassianIcon
                      client:load
                      base={15}
                      scale={5}
                      style="inline align-baseline"
                    />
                  </span>
                  <span class="pr-2 sm:pr-4">Atlassian</span>
                </IconPill>
              </a>
            </span>
          </h1>

          <p class="text-sm sm:text-xl">
            I'm a <Age client:idle /> year old developer who enjoys working on full-stack
            applications, writing clean code and ensuring top of the line DevEx.
          </p>
        </div>
        <div>
          <h2
            class="text-md my-5 font-bold sm:my-10 sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl"
          >
            What am I working on?
          </h2>
          <p class="my-2 text-sm sm:my-4 sm:text-xl">
            Probably sleeping ğŸ˜´, here's some stuff
            just in case I am working though ğŸ«°ğŸ¼
          </p>
          <div class="flex flex-col sm:gap-1 lg:flex-row lg:gap-5">
            {repoResult.success ? (
              repoResult.repos.map((r) => <Repo repo={r} />)
            ) : (
              <p class="text-sm italic opacity-75 sm:text-lg">{repoResult.error}</p>
            )}
          </div>
        </div>
      </div>
      <div class="hidden 2xl:block" style="flex-basis: calc(100% / 2);"></div>
    </div>
  </main>
</Layout>
