---
import StarIcon from "@svelteComponents/StarIcon.svelte";

import type { Repo } from "@utils/github";

export interface Props {
	repo: Repo;
}

const { name, description, language, stargazers, link } = Astro.props.repo;
---

<!-- prettier-ignore -->
<a
  href={link}
  target="_blank"
  rel="noopener noreferrer"
  class="
    repo-card group/repo relative my-4 p-4 overflow-hidden
    rounded-md border-4 border-secondary-light dark:border-secondary-dark
    sm:border-8 sm:p-6 lg:w-1/3
  "
>
  <div class="repo-sweep"></div>
  <div class="pb-1 text-lg font-bold sm:text-xl relative z-10">{name}</div>
  <div class="text-md pb-7 sm:text-lg relative z-10">{description}</div>
  <div
    class="
      absolute bottom-4 text-xs z-10
    "
  >
    {language} | {stargazers}
    <StarIcon
    client:load
    base={20}
    scale={1}
    style="inline-block pb-1 group-hover/repo:fill-tertiary-light group-hover/repo:dark:fill-tertiary-dark"
  />
  </div>
</a>

<style>
  .repo-card {
    transition: background-color 0.5s ease-out;
  }

  .repo-card:hover {
    /* secondary-light: orange[300] = #fdba74, secondary-dark: slate[600] = #475569 */
    background-color: #fdba74;
  }

  :global(html.dark) .repo-card:hover {
    background-color: #475569;
  }

  .repo-sweep {
    position: absolute;
    bottom: -100%;
    left: -100%;
    width: 300%;
    height: 300%;
    background: radial-gradient(
      circle at center,
      #ea580c 0%,
      #ea580c 10%,
      transparent 40%
    );
    opacity: 0;
    pointer-events: none;
    z-index: 1;
    transition: none;
  }

  :global(html.dark) .repo-sweep {
    background: radial-gradient(
      circle at center,
      #cbd5e1 0%,
      #cbd5e1 10%,
      transparent 40%
    );
  }

  .repo-card:hover .repo-sweep {
    opacity: 0.25;
    bottom: 0%;
    left: 0%;
    transition:
      bottom 0.5s ease-out,
      left 0.5s ease-out,
      opacity 0.3s ease-out;
  }
</style>
